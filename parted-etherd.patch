--- parted-1.8.8/include/parted/device.h.orig	2007-07-31 21:03:53.000000000 +0200
+++ parted-1.8.8/include/parted/device.h	2007-08-22 22:20:18.024824864 +0200
@@ -46,7 +46,8 @@
         PED_DEVICE_DM           = 12,
         PED_DEVICE_XVD          = 13,
         PED_DEVICE_SDMMC        = 14,
-        PED_DEVICE_VIRTBLK      = 15
+        PED_DEVICE_VIRTBLK      = 15,
+        PED_DEVICE_AOE          = 16
 } PedDeviceType;
 
 typedef struct _PedDevice PedDevice;
--- parted-1.8.0/libparted/arch/linux.c.orig	2006-11-17 16:44:19.000000000 +0100
+++ parted-1.8.0/libparted/arch/linux.c	2006-11-23 20:52:58.101933750 +0100
@@ -262,6 +262,7 @@
 #define UBD_MAJOR               98
 #define DASD_MAJOR              94
 #define VIODASD_MAJOR           112
+#define AOE_MAJOR		152
 #define SX8_MAJOR1              160
 #define SX8_MAJOR2              161
 
@@ -464,6 +465,8 @@
                 dev->type = PED_DEVICE_CPQARRAY;
         } else if (dev_major == UBD_MAJOR && (dev_minor % 0x10 == 0)) {
                 dev->type = PED_DEVICE_UBD;
+	} else if (dev_major == AOE_MAJOR && (dev_minor % 0x10 == 0)) {
+		dev->type = PED_DEVICE_AOE;
 #ifdef ENABLE_DEVICE_MAPPER
         } else if (_is_dm_major(dev_major)) {
                 dev->type = PED_DEVICE_DM;
@@ -1150,6 +1153,11 @@
                         goto error_free_arch_specific;
                 break;
 
+	case PED_DEVICE_AOE:
+		if (!init_generic (dev, _("AoE Driver")))
+			goto error_free_dev;
+		break;
+
         case PED_DEVICE_FILE:
                 if (!init_file (dev))
                         goto error_free_arch_specific;
